<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lesson 1: Vocabulary + Reading</title>
  <style>
    body { font-family: calibri; max-width: 800px; margin: auto; line-height: 1.6; padding: 20px; }
    .question { margin-top: 20px; }
    .choices button { margin: 5px; display: block; }
    .result { font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>

  <h1>üìò Lesson 1: Vocabulary + Reading</h1>
  <button onclick="speak(text)">üîä Listen to the passage</button>
  <p id="text">
    Today, smartphones have become a necessary tool in our daily lives.‚ÄÇ‚ÄÇHowever, it is reported that excessive use of smartphones may weaken our brain functions.‚ÄÇ‚ÄÇSmartphones give us much more information than we realize through texts, images, and videos.‚ÄÇ‚ÄÇUnfortunately, our brains cannot deal with such a huge amount of information at the same time.‚ÄÇ‚ÄÇBy overusing smartphones, we may become more forgetful and even lose our ability to judge things properly.‚ÄÇ‚ÄÇThese symptoms are called ‚Äúbrain overload‚Äù or digital cognitive dysfunction.

„ÄÄThe concept of brain overload is clearly supported by scientific research.‚ÄÇ‚ÄÇFigure 1 displays two images of the same patient‚Äôs brain.‚ÄÇ‚ÄÇThe left image shows the brain has cognitive dysfunction from using a smartphone more than five hours a day.‚ÄÇ‚ÄÇThe blue parts indicate that cerebral blood flow has decreased and that brain functions are impaired.‚ÄÇ‚ÄÇThe right one shows that brain dysfunction has almost recovered after reducing the use of a smartphone.‚ÄÇ‚ÄÇThis analysis of brain function images demonstrates that overusing smartphones has a negative effect on our brains.‚ÄÇ‚ÄÇIt is also said that more young people are suffering from cognitive dysfunction.‚ÄÇ‚ÄÇA doctor at a memory clinic reports, ‚ÄúIn the past, most of my patients were elderly people, but these days, about 40% are in their 30s to 50s.‚Äù

„ÄÄOur brains deal with information in three stages: input, organization, and output.‚ÄÇ‚ÄÇThe second stage, ‚Äúorganization,‚Äù is the key to processing information, whereby our brains sort information, then store the important information and delete the rest.‚ÄÇ‚ÄÇOur brains organize information only while we are resting.‚ÄÇ‚ÄÇThus, when we use smartphones excessively, brains become overloaded.‚ÄÇ‚ÄÇAs a result, cognitive dysfunction can be caused, preventing us from processing information properly.
  </p>

  <div class="question" id="quiz-container"></div>
  <div class="result" id="result"></div>

  <script>
    const text = document.getElementById("text").innerText;

    function speak(text) {
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'en-US';
      speechSynthesis.speak(utterance);
    }

    const questions = [
      // üîπ Part 1: Technology Vocabulary (from former lesson3)
      {
        id: 1,
        question: "What does 'weaken' mean?",
        choices: ["Âº±„ÅÑ", "„Äú„Çí‰Ωé‰∏ã„Åï„Åõ„Çã", "ÈÄ±", "„Äú„ÇíÁ§∫„Åô"],
        answer: 2
      },
      {
        id: 2,
        question: "What does 'demonstrate' mean?",
        choices: ["„Äú„ÇíÂàÜÊûê„Åô„Çã", "„Äú„ÇíÊ∂àÂéª„Åô„Çã", "ÂõûÂæ©„Åô„Çã", "„Äú„ÇíÂÆüË®º„Åô„Çã"],
        answer: 4
      },
      {
        id: 3,
        question: "What does 'whereby' mean?",
        choices: ["‰∏ÄÊñπ„Åß", "„Åù„Çå„Å´„Çà„Å£„Å¶", "ÈùûÂ∏∏„Å´", "ÁõÆÁöÑ„ÇÇ„Å™„Åè"],
        answer: 2
      },
      {
        id: 4,
        question: "What does 'sort' mean?",
        choices: ["„Äú„ÇíÂàÜÈ°û„Åô„Çã", "„Äú„ÇíÁ§∫„Åô", "„Äú„ÇíÂàÜÊûê„Åô„Çã", "„Äú„ÇíÂà∂Èôê„Åô„Çã"],
        answer: 1
      },
      {
        id: 5,
        question: "What does 'addiction' mean?",
        choices: ["ÁîªÈù¢", "ÂØæÁ≠ñ", "‰∏≠ÊØí", "ÁóáÁä∂"],
        answer: 3
      },
      // üîπ Part 2: Brain Overload Reading (from former lesson1)
      {
        id: 4,
        question: "What does excessive use of smartphones do?",
        choices: ["Improve memory", "Weaken brain functions", "Strengthen concentration", "Help sleep better"],
        answer: 1
      },
      {
        id: 5,
        question: "What is described as a necessary tool?",
        choices: ["Books", "TV", "Smartphones", "Glasses"],
        answer: 2
      }
    ];

    let mainPool = [...questions];
    let retryPool = [];
    let answeredLog = {};
    let mistakes = [];

    let currentQuestion = null;

    function getNextQuestion() {
      if (mainPool.length > 0) return mainPool.shift();
      const retryCandidates = retryPool.filter(q => !answeredLog[q.id]);
      if (retryCandidates.length > 0) {
        return retryCandidates[Math.floor(Math.random() * retryCandidates.length)];
      }
      return null;
    }

    function showQuestion() {
      currentQuestion = getNextQuestion();
      if (!currentQuestion) {
        showResult();
        return;
      }

      let html = `<h3>${currentQuestion.question}</h3><div class="choices">`;
      currentQuestion.choices.forEach((choice, i) => {
        html += `<button onclick="checkAnswer(${i})">${choice}</button>`;
      });
      html += "</div>";
      document.getElementById("quiz-container").innerHTML = html;
    }

    function checkAnswer(selected) {
      const q = currentQuestion;
      const resultDiv = document.getElementById("result");

      if (selected === q.answer) {
        answeredLog[q.id] = true;
        resultDiv.innerText = "‚úÖ Correct!";
      } else {
        resultDiv.innerText = "‚ùå Incorrect. Will appear again.";
        if (!retryPool.some(item => item.id === q.id)) retryPool.push(q);
        if (!mistakes.includes(q.id)) mistakes.push(q.id);
      }

      setTimeout(() => {
        resultDiv.innerText = "";
        showQuestion();
      }, 1000);
    }

    function showResult() {
      const total = questions.length;
      const correct = Object.keys(answeredLog).length;
      const score = Math.floor((correct / total) * 100);

      document.getElementById("quiz-container").innerHTML = `
        <h2>üéâ You completed the combined lesson!</h2>
        <p>‚úÖ Score: ${score}%</p>
        <p>‚ùå Mistakes: ${mistakes.length} question(s)</p>
        <a href="../index.html">üîô Back to Top</a>
      `;

      const user = localStorage.getItem("lesson_username") || "default";
      const resultData = {
        score: score,
        mistakes: mistakes
      };
      localStorage.setItem(`${user}_lesson1`, JSON.stringify(resultData));
    }

    showQuestion();
  </script>

</body>
</html>
